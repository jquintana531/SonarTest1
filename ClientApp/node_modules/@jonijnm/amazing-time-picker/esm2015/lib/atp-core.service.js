import { Injectable } from '@angular/core';
import * as ɵngcc0 from '@angular/core';
export class AtpCoreService {
    constructor() { }
    allowedTimes(min, max) {
        const allTimes = [];
        const nowMinHour = +min.split(':')[0];
        const nowMaxHour = +max.split(':')[0];
        const nowMinMin = +min.split(':')[1];
        const nowMaxMin = +max.split(':')[1];
        for (let i = nowMinHour; i <= nowMaxHour; i++) {
            let j = 0, jDest = 59;
            if (i === nowMinHour) {
                j = nowMinMin;
            }
            else if (i === nowMaxHour) {
                jDest = nowMaxMin;
            }
            for (j; j <= jDest; j++) {
                const hour = i <= 12 ? i : i - 12;
                const minute = j;
                const ampm = i < 12 ? 'AM' : 'PM';
                allTimes.push(hour + ':' + minute + ' ' + ampm);
            }
        }
        return allTimes;
    }
    ClockMaker(type) {
        const items = [];
        const timeVal = (type === 'minute') ? 60 : 12;
        const timeStep = (type === 'minute') ? 5 : 1;
        const timeStart = (type === 'minute') ? 0 : 1;
        const r = 124;
        const j = r - 25;
        for (let min = timeStart; min <= timeVal; min += timeStep) {
            if (min !== 60) {
                const str = String(min);
                const x = j * Math.sin(Math.PI * 2 * (min / timeVal));
                const y = j * Math.cos(Math.PI * 2 * (min / timeVal));
                items.push({
                    time: str,
                    left: (x + r - 17) + 'px',
                    top: (-y + r - 17) + 'px',
                    type
                });
            }
        }
        return items;
    }
    TimeToString(time) {
        const { ampm, minute, hour } = time;
        let hh = ampm === 'PM' ? +hour + 12 : +hour;
        if (ampm === 'AM' && hh === 12) {
            hh = 0;
        }
        if (hh === 24) {
            hh = 12;
        }
        hh = hh < 10 ? '0' + hh : '' + hh;
        const mm = minute < 10 ? '0' + minute : minute;
        return `${hh}:${mm}`;
    }
    /**
     * Converts 00:00 format to ITime object
     */
    StringToTime(time) {
        const [h, m] = time.split(':');
        let hour = +h > 12 ? +h - 12 : +h;
        hour = hour === 0 ? 12 : hour;
        const ampm = +h >= 12 ? 'PM' : 'AM';
        return {
            ampm, minute: +m, hour
        };
    }
    /**
     * @experimental
     */
    CalcDegrees(ele, parrentPos, step) {
        const clock = {
            width: ele.currentTarget.offsetWidth,
            height: ele.currentTarget.offsetHeight
        };
        const targetX = clock.width / 2;
        const targetY = clock.height / 2;
        const Vx = Math.round((ele.clientX - parrentPos.left) - targetX);
        const Vy = Math.round(targetY - (ele.clientY - parrentPos.top));
        let radians = -Math.atan2(Vy, Vx);
        radians += 2.5 * Math.PI;
        let degrees = Math.round(radians * 180 / Math.PI);
        const degMod = degrees % step;
        if (degMod === 0) {
            return degrees;
        }
        else if (degMod >= step / 2) {
            degrees = degrees + (step - degMod);
        }
        else if (degMod < step / 2) {
            degrees = degrees - degMod;
        }
        return degrees;
    }
}
AtpCoreService.ɵfac = function AtpCoreService_Factory(t) { return new (t || AtpCoreService)(); };
AtpCoreService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: AtpCoreService, factory: AtpCoreService.ɵfac });
AtpCoreService.ctorParameters = () => [];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AtpCoreService, [{
        type: Injectable
    }], function () { return []; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXRwLWNvcmUuc2VydmljZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvYW1hemluZy10aW1lLXBpY2tlci9zcmMvbGliL2F0cC1jb3JlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFJM0MsTUFBTSxPQUFPLGNBQWM7QUFDM0IsSUFDRSxnQkFBZ0IsQ0FBQztBQUNuQixJQUNTLFlBQVksQ0FBRSxHQUFHLEVBQUUsR0FBRztBQUMvQixRQUFJLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUN4QixRQUFJLE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxQyxRQUFJLE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxQyxRQUFJLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QyxRQUFJLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QyxRQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsSUFBSSxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbkQsWUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQ0wsS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNyQixZQUFNLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUM1QixnQkFBUSxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ3RCLGFBQU87QUFBQyxpQkFBSSxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDbEMsZ0JBQVEsS0FBSyxHQUFHLFNB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QUFLO0FBQUMsYUFBSyxJQUFJLE1BQU0sSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFO0FBQ25DLFlBQU0sT0FBTyxHQUFHLE9BQU8sR0FBRyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQztBQUMxQyxTQUFLO0FBQUMsYUFBSyxJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFO0FBQ2xDLFlBQU0sT0FBTyxHQUFHLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDakMsU0FBSztBQUNMLFFBQUksT0FBTyxPQUFPLENBQUM7QUFDbkIsSUFBRSxDQUFDO0FBQ0g7MENBM0dDLFVBQVU7d0hBQ1Q7QUFBQzs7O2dEQUVVO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJVGltZSB9IGZyb20gJy4vZGVmaW5pdGlvbnMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQXRwQ29yZVNlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgcHVibGljIGFsbG93ZWRUaW1lcyAobWluLCBtYXgpIHtcbiAgICBjb25zdCBhbGxUaW1lcyA9IFtdO1xuICAgIGNvbnN0IG5vd01pbkhvdXIgPSArbWluLnNwbGl0KCc6JylbMF07XG4gICAgY29uc3Qgbm93TWF4SG91ciA9ICttYXguc3BsaXQoJzonKVswXTtcbiAgICBjb25zdCBub3dNaW5NaW4gPSArbWluLnNwbGl0KCc6JylbMV07XG4gICAgY29uc3Qgbm93TWF4TWluID0gK21heC5zcGxpdCgnOicpWzFdO1xuICAgIGZvciAobGV0IGkgPSBub3dNaW5Ib3VyOyBpIDw9IG5vd01heEhvdXI7IGkrKykge1xuICAgICAgbGV0IGogPSAwLFxuICAgICAgICAgIGpEZXN0ID0gNTk7XG4gICAgICBpZiAoaSA9PT0gbm93TWluSG91cikge1xuICAgICAgICBqID0gbm93TWluTWluO1xuICAgICAgfWVsc2UgaWYgKGkgPT09IG5vd01heEhvdXIpIHtcbiAgICAgICAgakRlc3QgPSBub3dNYXhNaW47XG4gICAgICB9XG4gICAgICBmb3IgKGo7IGogPD0gakRlc3Q7IGorKykge1xuICAgICAgICBjb25zdCBob3VyID0gaSA8PSAxMiA/IGkgOiBpIC0gMTI7XG4gICAgICAgIGNvbnN0IG1pbnV0ZSA9IGo7XG4gICAgICAgIGNvbnN0IGFtcG0gPSBpIDwgMTIgPyAnQU0nIDogJ1BNJztcbiAgICAgICAgYWxsVGltZXMucHVzaChob3VyICsgJzonICsgbWludXRlICsgJyAnICsgYW1wbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUaW1lcztcbiAgfVxuXG4gIHB1YmxpYyBDbG9ja01ha2VyICh0eXBlOiAnbWludXRlJyB8ICdob3VyJyk6IEFycmF5PGFueT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgdGltZVZhbCA9ICh0eXBlID09PSAnbWludXRlJykgPyA2MCA6IDEyO1xuICAgIGNvbnN0IHRpbWVTdGVwID0gKHR5cGUgPT09ICdtaW51dGUnKSA/IDUgOiAxO1xuICAgIGNvbnN0IHRpbWVTdGFydCA9ICh0eXBlID09PSAnbWludXRlJykgPyAwIDogMTtcbiAgICBjb25zdCByID0gMTI0O1xuICAgIGNvbnN0IGogPSByIC0gMjU7XG5cbiAgICBmb3IgKGxldCBtaW4gPSB0aW1lU3RhcnQ7IG1pbiA8PSB0aW1lVmFsOyBtaW4gKz0gdGltZVN0ZXApIHtcbiAgICAgIGlmIChtaW4gIT09IDYwKSB7XG4gICAgICAgIGNvbnN0IHN0ciA9IFN0cmluZyhtaW4pO1xuICAgICAgICBjb25zdCB4ID0gaiAqIE1hdGguc2luKE1hdGguUEkgKiAyICogKG1pbiAvIHRpbWVWYWwpKTtcbiAgICAgICAgY29uc3QgeSA9IGogKiBNYXRoLmNvcyhNYXRoLlBJICogMiAqIChtaW4gLyB0aW1lVmFsKSk7XG5cbiAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgdGltZTogc3RyLFxuICAgICAgICAgIGxlZnQ6ICh4ICsgciAtIDE3KSArICdweCcsXG4gICAgICAgICAgdG9wOiAoLXkgKyByIC0gMTcpICsgJ3B4JyxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXM7XG4gIH1cblxuICBwdWJsaWMgVGltZVRvU3RyaW5nKHRpbWU6IElUaW1lKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IGFtcG0sIG1pbnV0ZSwgaG91ciB9ID0gdGltZTtcbiAgICBsZXQgaGggPSBhbXBtID09PSAnUE0nID8gK2hvdXIgKyAxMiA6ICtob3VyO1xuICAgIGlmIChhbXBtID09PSAnQU0nICYmIGhoID09PSAxMikge1xuICAgICAgaGggPSAwO1xuICAgIH1cbiAgICBpZiAoIGhoID09PSAyNCkge1xuICAgICAgaGggPSAxMjtcbiAgICB9XG4gICAgaGggPSBoaCA8IDEwID8gJzAnICsgaGggOiAnJyArIGhoIGFzIGFueTtcbiAgICBjb25zdCBtbSA9IG1pbnV0ZSA8IDEwID8gJzAnICsgbWludXRlIDogbWludXRlO1xuICAgIHJldHVybiBgJHtoaH06JHttbX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIDAwOjAwIGZvcm1hdCB0byBJVGltZSBvYmplY3RcbiAgICovXG4gIHB1YmxpYyBTdHJpbmdUb1RpbWUgKHRpbWU6IHN0cmluZyk6IElUaW1lIHtcbiAgICBjb25zdCBbaCwgbV0gPSB0aW1lLnNwbGl0KCc6Jyk7XG4gICAgbGV0IGhvdXIgPSAraCA+IDEyID8gK2ggLSAxMiA6ICtoO1xuICAgIGhvdXIgPSBob3VyID09PSAwID8gMTIgOiBob3VyO1xuICAgIGNvbnN0IGFtcG0gPSAraCA+PSAxMiA/ICdQTScgOiAnQU0nO1xuICAgIHJldHVybiB7XG4gICAgICBhbXBtLCBtaW51dGU6ICttLCBob3VyXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZXhwZXJpbWVudGFsXG4gICAqL1xuICBwdWJsaWMgQ2FsY0RlZ3JlZXMgKGVsZTogYW55LCBwYXJyZW50UG9zOiBhbnksIHN0ZXA6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgY2xvY2sgPSB7XG4gICAgICB3aWR0aDogZWxlLmN1cnJlbnRUYXJnZXQub2Zmc2V0V2lkdGgsXG4gICAgICBoZWlnaHQ6IGVsZS5jdXJyZW50VGFyZ2V0Lm9mZnNldEhlaWdodFxuICAgIH07XG4gICAgY29uc3QgdGFyZ2V0WCA9IGNsb2NrLndpZHRoIC8gMjtcbiAgICBjb25zdCB0YXJnZXRZID0gY2xvY2suaGVpZ2h0IC8gMjtcbiAgICBjb25zdCBWeCA9IE1hdGgucm91bmQoKGVsZS5jbGllbnRYIC0gcGFycmVudFBvcy5sZWZ0KSAtIHRhcmdldFgpO1xuICAgIGNvbnN0IFZ5ID0gTWF0aC5yb3VuZCh0YXJnZXRZIC0gKGVsZS5jbGllbnRZIC0gcGFycmVudFBvcy50b3ApKTtcbiAgICBsZXQgcmFkaWFucyA9IC1NYXRoLmF0YW4yKFZ5LCBWeCk7XG4gICAgcmFkaWFucyArPSAyLjUgKiBNYXRoLlBJO1xuXG4gICAgbGV0IGRlZ3JlZXMgPSBNYXRoLnJvdW5kKHJhZGlhbnMgKiAxODAgLyBNYXRoLlBJKTtcbiAgICBjb25zdCBkZWdNb2QgPSBkZWdyZWVzICUgc3RlcDtcbiAgICBpZiAoZGVnTW9kID09PSAwKSB7XG4gICAgICByZXR1cm4gZGVncmVlcztcbiAgICB9IGVsc2UgaWYgKGRlZ01vZCA+PSBzdGVwIC8gMikge1xuICAgICAgZGVncmVlcyA9IGRlZ3JlZXMgKyAoc3RlcCAtIGRlZ01vZCk7XG4gICAgfSBlbHNlIGlmIChkZWdNb2QgPCBzdGVwIC8gMikge1xuICAgICAgZGVncmVlcyA9IGRlZ3JlZXMgLSBkZWdNb2Q7XG4gICAgfVxuICAgIHJldHVybiBkZWdyZWVzO1xuICB9XG59XG4iXX0=